<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://api-maps.yandex.ru/3.0/?apikey=3f74eb93-519d-4a53-a0ca-cedb57c20fab&lang=ru_RU" type="text/javascript"></script>
    <script src="./common.js"></script>

    <script type="text/babel">
        window.map = null;

        main();
        async function main() {
            const [ymaps3React] = await Promise.all([ymaps3.import('@yandex/ymaps3-reactify'), ymaps3.ready]);
            const reactify = ymaps3React.reactify.bindTo(React, ReactDOM);
            const {
                YMap,
                YMapDefaultSchemeLayer,
                YMapControls,
                YMapDefaultFeaturesLayer,
                YMapMarker
            } = reactify.module(ymaps3);
            const {useState} = React;

            const {YMapZoomControl} = reactify.module(await ymaps3.import('@yandex/ymaps3-controls@0.0.1'));

            ReactDOM.render(<React.StrictMode><App /></React.StrictMode>, document.getElementById('app'));
            function App() {
                const [location, setLocation] = useState(LOCATION);
                return <YMap location={location} ref={x => map = x}>
                    <YMapDefaultSchemeLayer />
                    <YMapDefaultFeaturesLayer />
                    <YMapControls position="right">
                        <YMapZoomControl />
                    </YMapControls>

                    <YMapMarker coordinates={LOCATION.center}>
                        <img src="./pin.svg" className="my-marker" onClick={() => setLocation({...LOCATION, duration: 400})} />
                    </YMapMarker>
                    <YMapMarker coordinates={LOCATION1.center}>
                        <img src="./pin.svg" className="my-marker" onClick={() => setLocation({...LOCATION1, duration: 400})} />
                    </YMapMarker>
                    <YMapMarker coordinates={LOCATION2.center}>
                        <img src="./pin.svg" className="my-marker" onClick={() => setLocation({...LOCATION2, duration: 400})} />
                    </YMapMarker>
                </YMap>
            }
        }
    </script>

    <style>html,
body,
#app {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;

    font-family: 'Yandex Sans Text', Arial, Helvetica, sans-serif;
}
</style>
    <link rel="stylesheet" href="./common.css">
</head>
<body>
    <div id="app"></div>
</body>
</html>
